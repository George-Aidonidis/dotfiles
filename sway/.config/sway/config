set $mod Mod4

set $menu "QT_AUTO_SCREEN_SCALE_FACTOR=0 QT_SCALE_FACTOR=0 ensure-us-layout 'rofi -combi-modi drun,window -modi combi -show combi -lines 6 -show-icons'"
set $run_rofi_emoji "ensure-us-layout rofi-emoji-launch"

set $Slash_Question 61
set $Slash_Pipe 51
## qwertyuiop
set $code_q 24
set $code_w 25
set $code_e 26
set $code_r 27
set $code_t 28
set $code_y 29
set $code_u 30
set $code_i 31
set $code_o 32
set $code_p 33
## asdfghjkl
set $code_a 38
set $code_s 39
set $code_d 40
set $code_f 41
set $code_g 42
set $code_h 43
set $code_j 44
set $code_k 45
set $code_l 46
## zxcvbnm
set $code_z 52
set $code_x 53
set $code_c 54
set $code_v 55
set $code_b 56
set $code_n 57
set $code_m 58

set $term kitty

set $left $code_h
set $down $code_j
set $up $code_k
set $right $code_l

gaps inner 8
gaps outer 2

#####################
## Script assigners #
#####################

#set $stoprec killall -q ffmpeg
#set $screencast  bash screencast_pulse
bindsym $mod+Return exec $term

bindcode $mod+$code_q kill
bindcode $mod+Shift+$code_q kill

bindcode $mod+Shift+$code_d exec $run_rofi_emoji
bindcode $mod+$code_d exec $menu
bindsym $mod+Shift+period move scratchpad
bindsym $mod+period scratchpad show move position center

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

bindcode $mod+$code_i exec $term -e htop
bindcode $mod+$code_a exec $term -e ranger
bindcode $mod+$code_n exec nautilus
bindcode $mod+$code_w exec $BROWSER
bindcode $mod+shift+$code_w exec $SECONDARYBROWSER

bindcode $mod+shift+$code_t exec typora
bindcode $mod+shift+$code_a exec atom
bindcode $mod+shift+$code_s exec code


# exit sway (logs you out of your Wayland session)
bindcode $mod+Shift+$code_e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'
#################
# Moving around #
#################
# Move your focus around
bindcode $mod+$left focus left
bindcode $mod+$down focus down
bindcode $mod+$up focus up
bindcode $mod+$right focus right
# or use $mod+[up|down|left|right]
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# _move_ the focused window with the same, but add Shift
bindcode $mod+Shift+$left move left
bindcode $mod+Shift+$down move down
bindcode $mod+Shift+$up move up
bindcode $mod+Shift+$right move right
# ditto, with arrow keys
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

###################################
# Resize without the resize mode #
###################################
bindcode $mod+Shift+$code_y exec i3resize left
bindcode $mod+Shift+$code_u exec i3resize down
bindcode $mod+Shift+$code_i exec i3resize up
bindcode $mod+Shift+$code_o exec i3resize right

# Note: workspaces can have any name you want, not just numbers.
# We just use 1-10 as the default.
##############
# Workspaces #
##############
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10
# Layout stuff:
#
# You can "split" the current object of your focus with
# $mod+b or $mod+v, for horizontal and vertical splits
# respectively.
bindcode $mod+$code_b splith
bindcode $mod+v splitv

# Make the current focus fullscreen
bindcode $mod+$code_f fullscreen

bindcode $mod+$code_r mode "resize"
# split in horizontal orientation
bindcode $mod+Shift+$code_v split h
# split in vertical orientation
bindcode $mod+$code_v split v

# position window to center of the screen
bindcode $mod+$code_g move position center
# change container layout (stacked, tabbed, toggle split)
# bindcode $mod+$code_s layout stacking
# bindcode $mod+$code_w layout tabbed
bindcode $mod+$code_e layout toggle split
# toggle tiling / floating
bindcode $mod+$code_t floating toggle
# change focus between tiling / floating windows
bindsym $mod+Tab focus mode_toggle

# focus the parent container
bindcode $mod+$code_p focus parent
# focus the child container
bindcode $mod+$code_c focus child

##########
## Modes #
##########
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindcode $left resize shrink width 10px
    bindcode $down resize grow height 10px
    bindcode $up resize shrink height 10px
    bindcode $right resize grow width 10px

    # ditto, with arrow keys
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Toggle float mode for specific apps
for_window [class="Gnome-calculator"] floating enable
for_window [class="Gnome-calculator"] move position center

for_window [class="Typora"] floating enable resize set 670 750
for_window [class="Typora"] move position center

for_window [class="Peek"] floating enable resize set 600 300
for_window [class="Peek"] move position center

for_window [class="slack"] floating enable resize set 970 880
for_window [class="slack"] move position center

for_window [class="wavebox"] floating enable resize set 1470 980 move position center
for_window [class="wavebox"] move position center

for_window [title="Messenger for Desktop"] floating enable resize set 900 550, move absolute position 20 500

for_window [class="Enpass"] floating enable resize set 600 300
for_window [class="Enpass"] move position center

for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable

for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable
#####################################
# Assign applications to workspaces #
#####################################
assign [class="Atom"] $ws3
assign [class="Code"] $ws3
assign [class="Firefox"] $ws2
assign [class="Brave-browser"] $ws2
assign [class="Google-chrome"] $ws2
assign [class="Slack"] $ws4
assign [class="wavebox"] $ws4
assign [title="Messenger for Desktop"] $ws5
for_window [title="^Enpass$"] move container to workspace $ws7
for_window [class="Spotify"] move to workspace $ws10

## Restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
#bindcode $mod+Shift+$code_r restart

##########################################
##=========== Custom Commands ===========#
##########################################
## Set background
#bindsym $mod+Shift+Print exec unsplash-generator
bindsym $mod+Print exec --no-startup-id random-wallpaper

## Assign profile switch for bose35 headset to keyboard shortcut
bindcode Control+Shift+$Slash_Question exec bose35-profile-switch
#bindcode $mod+shift+$code_x exec blur-lock

# Keyboard media controls
bindsym $mod+F2 exec amixer set Capture 2%-
bindsym $mod+F3 exec amixer set Capture 2%+
bindsym XF86AudioLowerVolume exec amixer -q -D pulse sset Master 2%-
bindsym XF86AudioRaiseVolume exec amixer -q -D pulse sset Master 2%+
bindsym XF86AudioMute exec amixer -q -D pulse sset Master toggle
bindsym XF86AudioMicMute exec amixer set Capture toggle

#bindsym $mod+shift+F3 exec $HOME/dotfiles/scripts/polybar/pulse-input --volume_source_up
#bindsym $mod+shift+F2 exec $HOME/dotfiles/scripts/polybar/pulse-input --volume_source_down

#bindsym $mod+F4 exec amixer set Capture toggle

# Sreen brightness controls
# Requires light package from aur
bindsym XF86MonBrightnessUp exec light -A 10 # increase screen brightness
bindsym XF86MonBrightnessDown exec light -U 10 # decrease screen brightness

# Media player controls
bindsym $mod+F10 exec playerctl previous
bindsym $mod+F11 exec playerctl play-pause
bindsym $mod+F12 exec playerctl next

bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86WLAN exec wifi-toggle

bindsym $mod+Shift+Delete	exec playerctl pause; exec amixer set Capture nocap; exec pkill mpv; workspace 9; exec $term -e htop; exec $term -e ranger


#################################
# Always start (on reload etc...) #
#################################
# exec_always $HOME/dotfiles/polybar/.config/polybar/launch.sh

########################
# Applications Startup #
########################
exec nm-applet --indicator
exec mako
exec dropbox
exec wavebox
# Redshift doesn't work on wayland yet
exec redshift-gtk -l 35.1:25.7
exec parcellite
exec enpass
exec spotify


###############################################
##=========== Image/Video Commands ===========#
###############################################
#######################
## Screenshot helpers #
#######################
bindsym Control+Shift+F1 exec take-screenshot imgur
bindsym --release Shift+Print exec take-screenshot window
bindsym --release Print exec take-screenshot screen
bindsym --release Control+Shift+F4 exec take-screenshot region

###############
## Screencast #
###############
#set $screencastmode " :  (0)Laptop -  (1)Main"
#mode  $screencastmode {
#    bindsym 0 exec screencast 0; mode "default"
#    bindsym 1 exec screencast 1; mode "default"
#    bindcode $code_q mode "default"
#    bindsym Escape mode "default"
#}
#bindsym $mod+Insert mode $screencastmode
#bindsym $mod+Delete exec $stoprec


##############################################
#================== Modes ===================#
##############################################

####################
# Bluetooth Headet #
####################
set $bluetooth_headset "  (0)Disconnect -   (1)Connect"
mode  $bluetooth_headset {
    bindsym 0 exec disconnect-from-bose; mode "default"
    bindsym 1 exec connect-to-bose; mode "default"
    bindcode $code_q mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+F10 mode $bluetooth_headset
####################
## Display chooser #
####################
#set $displays "    (0)Laptop -     (1)Main -     (2)H -     (3)V"
#mode  $displays {
#    bindsym 0 exec laptop-screen; mode "default"
#    bindsym 1 exec one-screen; mode "default"
#    bindsym 2 exec horizontal-laptop-right; mode "default"
#    bindsym 3 exec vertical-layout-two-screens; mode "default"
#    bindcode $code_q mode "default"
#    bindsym Escape mode "default"
#}

#bindsym $mod+Shift+F7 mode $displays
###################
# Session manager #
###################
set $session " (E)xit - (L)ock -  (P)oweroff -  (R)eboot -  (S)upsend"
mode  $session {
   bindcode $code_e exec $psst i3-msg exit; mode "default"
   # bindcode $code_l exec "setxkbmap -layout us,gr"; mode "default"
   bindcode $code_l exec blur-lock; mode "default"
   # bindcode $code_l exec "setxkbmap -layout us"; exec dm-tool lock; mode "default"
   bindcode $code_p exec $psst systemctl poweroff; mode "default"
   bindcode $code_r exec $psst systemctl reboot; mode "default"
   bindcode $code_s exec $psst systemctl suspend; mode "default"

   bindcode $code_q mode "default"
   bindsym Escape mode "default"
}

bindsym $mod+Shift+F4 mode $session
#########
# Theme #
########
# set primary gruvbox colorscheme colors
set $aqua #689d68
set $bg #282828
set $black #000000
set $blue #458588
set $darkgray #1d2021
set $gray #a89984
set $green #98971a
set $purple #b16286
set $red #cc241d
set $softYellow #fbf1c7
set $transparent_bg #88282828
set $white #ffffff
set $yellow #d79921

# Bindings to make the webcam float and stick.
for_window [class="MPlayer"] floating enable
for_window [class="MPlayer"] sticky enable
for_window [class="MPlayer"] border pixel 0
no_focus [class="MPlayer"]

#bindsym $mod+Home exec camtoggle

# class                 border|backgr|text|indicator|child_border
client.focused          $darkgray $blue $darkgray $purple $blue
client.focused_inactive $darkgray $darkgray $blue $purple $darkgray
client.unfocused        $darkgray $darkgray $blue $purple $darkgray
client.urgent           $red $red $blue $red $red

#######################
## i3 Bar with Blocks #
#######################

## bar {
## 		status_command i3blocks -c ~/.config/i3blocks/i3blocks.conf
## 		tray_output             primary
## 		separator_symbol        "|"
## 		workspace_buttons       yes
## 		position                top
## 		colors {
## 				background  #212121
## 				statusline  #DDDDDD
## 				separator   #777777
## 				# class             border  backgr. text
## 				focused_workspace   $darkgray $blue $darkgray $purple $white
## 				active_workspace    $darkgray $darkgray $white $purple $darkgray
## 				inactive_workspace  $darkgray $darkgray $white $purple $darkgray
## 				urgent_workspace    $red $red $white $red $red
## 		}
## }
##end of window title bars & borders section

## Activate 1px border on active window
## exec_always bash ~/.config/scripts/inactive-handler

## i3-gnome
## exec /usr/lib/gnome-settings-daemon/gsd-xsettings
## exec_always gnome-power-manager
## exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
## exec gnome-flashback
## exec_always gsettings set org.gnome.desktop.interface cursor-size 8
#

### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg ~/.config/wall.png fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#          timeout 300 'swaylock -f -c 000000' \
#          timeout 600 'swaymsg "output * dpms off"' \
#               resume 'swaymsg "output * dpms on"' \
#          before-sleep 'swaylock -f -c 000000'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.

### Key bindings
#
# Basics:
#
# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Despite the name, also works for non-floating windows.
# Change normal to inverse to use left mouse button for resizing and right
# mouse button for dragging.
floating_modifier $mod normal

# input 1:1:AT_Translated_Set_2_keyboard
# input 6127:24647:Lenovo_ThinkPad_Compact_USB_Keyboard_with_TrackPoint
input * {
    xkb_layout us,gr
    xkb_options grp:win_space_toggle,caps:swapescape,ctrl:swap_lalt_lctl,lv3:alt_switch,eurosign:e
}

input 2:7:SynPS/2_Synaptics_TouchPad {
	tap enabled
}

# reload the configuration file
bindcode $mod+Shift+$code_c exec 'swaymsg reload; swaymsg default_border pixel 2; swaymsg smart_borders on; swaymsg default_floating_border pixel 2;'

# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
# bar {
#     position top

#     # When the status_command prints a new line to stdout, swaybar updates.
#     # The default just shows the current date and time.
#     status_command while date +'%Y-%m-%d %l:%M:%S %p'; do sleep 1; done

#     colors {
#         statusline #ffffff
#         background #323232
#         inactive_workspace #32323200 #32323200 #5c5c5c
#     }
# }
bar {
    swaybar_command waybar
}

bindsym $mod+Shift+minus gaps inner all plus 4
bindsym $mod+Shift+plus gaps inner all minus 4
bindsym $mod+Mod1+Shift+minus gaps inner current plus 4
bindsym $mod+Mod1+Shift+plus gaps inner current minus 4

# Toggle border for all open windows
# bindcode $mod+$code_b [class="^.*"] border toggle
smart_borders on
exec swaymsg default_border pixel 2
exec swaymsg default_floating_border pixel 2

default_border normal 0
default_floating_border normal 0

bindcode $mod+Mod1+$left move workspace to output left
bindcode $mod+Mod1+$right move workspace to output right
bindcode $mod+Mod1+$down move workspace to output down
bindcode $mod+Mod1+$up move workspace to output up
bindcode $mod+Control+$right workspace next
bindcode $mod+Control+$left workspace prev
bindsym Control+Tab workspace next
bindsym Control+Shift+Tab workspace prev

xwayland enable

#floating enabled from some programs - find with xprop

for_window [class="Bleachbit"] floating disable
for_window [class="Blueberry.py"] floating enable resize set 300 650
for_window [class="Brasero"] floating disable
for_window [class="Galculator"] floating enable
for_window [class="Gnome-disks"] floating disable
for_window [class="^Gnome-font-viewer$"] floating enable
for_window [class="^Gpick$"] floating enable
for_window [class="Hexchat"] floating disable
for_window [class="Imagewriter"] floating enable
for_window [class="Font-manager"] floating enable
for_window [class="qt5ct|Lxappearance"] floating enable
for_window [class="Nitrogen"] floating disable
for_window [class="Pavucontrol"] floating disable
for_window [class="^Skype$"] floating enable
for_window [class="System-config-printer.py"] floating enable
for_window [class="Unetbootin.elf"] floating enable
for_window [class="Usb-creator-gtk"] floating enable
for_window [class="^Vlc$"] floating disable
for_window [class="Wine"] floating disable
for_window [class="Xfburn"] floating disable
for_window [class="Xfce4-appfinder"] floating enable
for_window [class="Xfce4-settings-manager"] floating disable
for_window [class="Xfce4-taskmanager"] floating enable

#for_window [instance="gimp"] floating disable
for_window [instance="script-fu"] border normal
for_window [instance="variety"] floating disable

for_window [title="Copying"] floating enable
for_window [title="Deleting"] floating enable
for_window [title="Moving"] floating enable

for_window [window_role="^gimp-toolbox-color-dialog$"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="^Preferences$"] floating enable
for_window [window_role="setup"] floating enable

exec_always wayland-gsettings \
    gtk-theme:gtk-theme-name \
    icon-theme:gtk-icon-theme-name \
    cursor-theme:gtk-cursor-theme-name \
    font-name:gtk-font-name \

include /etc/sway/config.d/*
