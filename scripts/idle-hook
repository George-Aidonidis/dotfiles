#!/usr/bin/env bash

minute () {
  echo $(($1*60))
}

previousPercentage=$(light -G)
export previousPercentage

# Run xidlehook
xidlehook \
  --not-when-fullscreen \
  --not-when-audio \
  --timer normal "$(minute 2)" \
    'light -S 0.1' \
    "light -S $previousPercentage" \
    --timer primary "$(minute 4)" \
    "light -S $previousPercentage; custom-lock" \
    '' \
    --timer normal "$(minute 30)" \
    'systemctl suspend' \
    ''

  # --timer normal "$(minute 2)" \
